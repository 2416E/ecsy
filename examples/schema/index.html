<!DOCTYPE html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="">
  </head>
  <body>
    <script type="module">
      import {createComponent, createType, Types} from '../../../build/ecsy.module.js';

      class Vector3 {
        constructor(x, y, z) {
          this.set(x,y,z);
        }

        copy(src) {
          this.x = src.x;
          this.y = src.y;
          this.z = src.z;
        }

        set(x,y,z) {
          this.x = x;
          this.y = y;
          this.z = z;
        }
      }

      var MYTYPES = {};

      MYTYPES.Vector3 = createType({
        baseType: Vector3,
        create: defaultValue => {
          var v = new Vector3(0, 0, 0);
          if (typeof defaultValue !== "undefined") {
            v.copy(defaultValue);
          }
          return v;
        },
        reset: (src, key, defaultValue) => {
          if (typeof defaultValue !== "undefined") {
            src[key].copy(defaultValue);
          } else {
            src[key].set(0, 0, 0);
          }
        },
        clear: (src, key) => {
          src[key].set(0, 0, 0);
        }
      });

      var schema = {
        float: { default: 0.1 }, // Inferred type
        float2: { default: 0.2, type: Types.Number },
        vector3: { default: new Vector3(1,2,3), type: MYTYPES.Vector3 },
        array: { default: [1,2,3], type: Types.Array }
      };

      var ComponentA = createComponent(schema, "ComponentA");
      window.ComponentA = ComponentA;

      var ca = new ComponentA();
      var cb = new ComponentA();
      ca.vector3.set(1,2,3);
      ca.float = 0.5;
      cb.vector3.set(4,5,6);
      cb.float = 1.5;

      cb.clear();
      cb.reset();

      console.log('ca', ca.vector3, ca.float);
      console.log('cb', cb.vector3, cb.float);
    </script>
  </body>
</html>